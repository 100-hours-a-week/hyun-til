# TIL Template

## 날짜: 2025-01-09

### 스크럼
- 학습 목표 1 : 쿠버네티스 수업 및 정리


### 오늘의 도전 과제와 해결 방법
- 도전 과제 1 : 쿠버네티스 배운 내용 정리

# K8S정리

- 쿠버네티스 오브젝트
    
    ### 쿠버네티스 오브젝트
    
    - `kubectl create` 로 생성되는 모든 것
    - 쿠버네티스에서 관리하고 추적해야하는 상태를 담고 있는 영구적인 엔티티
    - 오브젝트를 생성하면 쿠버네티스는 해당 오브젝트에 기록된 의도를 달성하기위해 내부적으로 동작 수행
    
    ### 오브젝트 구조
    
    - 클러스터 → 여러개의 네임스페이스 → 다양한 오브젝트
    
    ### 오브젝트 필수 필드
    
    - `apiVersion`  오브젝트를 해석할 API 버전
    - `kind` 오브젝트 타입의 종류
    - `metadata`  오브젝트에 대한 이름, 라벨, 네임 스페이스 등 메타정보
    - `spec` 사용자가 원하는 설정을 구체적으로 정의 하는 곳
    
    ### 대표적인 쿠버네티스 오브젝트 예시
    
    - Pod → 가장 작은 배포단위, 컨테이너를 감싸고 있는 기본 단위
    - ReplicaSet → 같은 Pod를 지정된 수만큼 유지 관리
    - Deployment → ReplicaSet을 더 편리하게 관리하기위한 상위 레벨 오브젝트
    - Service → Pod에 네트워크 서비를 제공
    - Ingress → 외부 트래픽을 내부 Service로 라우팅
- Deployment
    
    ### 쿠버네티스 Deployment
    
    - 애플리케이션을 어떻게 배포하고, 실행 중인 애플리케이션을 어떻게 업데이트하고 관리할지 정의해주는 리소스 → Pod를 관리하는 도구
    
    ### 역할
    
    - 애플리케이션 배포
    - 롤링 업데이트
    - 자동 복구
    - 스케일링
    - 버전 관리
    
    ### 동작 방식
    
    **Deployment → ReplicaSet → Pod**의 계층 구조로 애플리케이션 배포
    
    - Deployment가 원하는 개수(Replicas)만큼 Pod를 가동하기 위해 ReplicaSet을 생성하고 ReplicaSet은 지정된 수만큼 Pod가 동작하도록 관리
    - Pod가 삭제되거나 장애가 발생하면, ReplicaSet이 자동으로 새로운 Pod를 생성
- Service
    
    ### 쿠버네티스 Service
    
    - 애플리케이션에게 네트워크 서비스를 제공한다. Pod들이 네트워크 트래픽을 받을 수 있도록 서빙하는 역할
    - Pod가 생성, 종료 되면서 Ip주소가 바뀌어도 Serivce는 고정된 접근 지점을 제공하여 클라이언트가 지속적으로 연결할 수 있도록 하는것
    - 즉 Pod들의 Ip 주소 변화에 상관없이 동일안 DNS 이름 과 Ip를 유지
    
    ### 특징
    
    - Pod label(Selector)기반 라우팅 : 레이블을 통해 어떤 파드로 트래픽을 보낼지 결정
    - 로드 밸런싱 : 일종의 내부 로드밸런서 역할을 수행하며, 여러 파드에 트래픽을 분산
    - 고정 ip(ClusterIP) : 파드의 ip는 변동되어도 서비스의 ip는 변하지 않으므로 안정적 접속 제공
    - DNS 통합 : DNS형태로 통합되어, 컨테이너 내부에서 간단히 서비스명으로 접근 가능
- Calico
    
    ### 쿠버네티스 Calico
    
    - 쿠버네티스에서 네트워킹과 네트워크 보안을 제공하는 오픈소스 프로젝트
    - Layer 3 라우팅 방식을 사용하여 IP 계층에서 Pod 간 통신을 단순하면서도 확장성 있게 처리한다.
    
    ### 동작 원리
    
    기본 구조
    
    - Felix : 각 노드에서 동작하는 Calico의 핵심 에이전트로 라우팅 테이블 및 보안 정책 설정 담당
    - Typha : 대규모 클러스터에서 스케일 확장을 위해  etcd와 Felix 간의 연결을 효율화 해주는 컴포넌트
    - BGP(Border Gateway Protocol) : Calico는 노드간의 BGP를 통해 라우팅 정보를 교환하여 Pod 간 통신을 직접 L3 방식으로 처리

### 오늘의 회고
- 쿠버네티스가 생각보다 많이 어렵고 복잡해서 복습을 좀 더 열심히 해야겠다.
### 참고 자료 및 링크
